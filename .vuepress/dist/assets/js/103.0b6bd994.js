(window.webpackJsonp=window.webpackJsonp||[]).push([[103],{607:function(e,t,a){"use strict";a.r(t);var n=a(43),i=Object(n.a)({},function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("ContentSlotsDistributor",{attrs:{"slot-key":e.$parent.slotKey}},[a("h1",{attrs:{id:"wxsdkinstace"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#wxsdkinstace","aria-hidden":"true"}},[e._v("#")]),e._v(" WXSDKInstace")]),e._v(" "),a("p",[e._v("Weex Native 和 JavaScript 交互通信.")]),e._v(" "),a("h2",{attrs:{id:"自定义发送事件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#自定义发送事件","aria-hidden":"true"}},[e._v("#")]),e._v(" 自定义发送事件")]),e._v(" "),a("p",[e._v("向JS环境发送一些事件，比如"),a("code",[e._v("click")]),e._v("事件")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v("void fireEvent(elementRef,type)\nvoid fireEvent(elementRef,type, data)\nvoid fireEvent(elementRef,type,data,domChanges)\n")])])]),a("ul",[a("li",[a("p",[a("code",[e._v("elementRef")]),e._v("("),a("em",[e._v("String")]),e._v(")：产生事件的组件id")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("type")]),e._v("("),a("em",[e._v("String")]),e._v('): 事件名称，weex默认事件名称格式为"onXXX",比如'),a("code",[e._v("OnPullDown")])])]),e._v(" "),a("li",[a("p",[a("code",[e._v("data")]),e._v("("),a("em",[e._v("Map<String, Object>")]),e._v("): 需要发送的一些额外数据，比如"),a("code",[e._v("click")]),e._v("时，view大小，点击坐标等等。")])]),e._v(" "),a("li",[a("p",[a("code",[e._v("domChanges")]),e._v("("),a("em",[e._v("Map<String, Object>")]),e._v("): 目标组件的属性和样式发生的修改内容")])])]),e._v(" "),a("h2",{attrs:{id:"结果回调"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#结果回调","aria-hidden":"true"}},[e._v("#")]),e._v(" 结果回调")]),e._v(" "),a("p",[e._v("JS调用时，有的场景需要返回一些数，比如以下例子，返回x、y坐标")]),e._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[e._v('public class WXLocation extends WXModule {\n\n      @JSMethod\n      public void getLocation(JSCallback callback){\n      //Get the code for the location information .....\n      Map<String,String> data=new HashMap<>();\n      data.put("x","x");\n      data.put("y","y");\n      //notify once\n      callback.invoke(data);\n      //Continuous connection\n      callback.invokeAndKeepAlive(data);\n      //Invoke method and invokeAndKeepAlive two methods of choice  }\n}\n')])])]),a("h2",{attrs:{id:"onwxscrolllistener"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#onwxscrolllistener","aria-hidden":"true"}},[e._v("#")]),e._v(" OnWXScrollListener")]),e._v(" "),a("p",[e._v("如果想要拿到instance滚动的信息，需要在"),a("code",[e._v("WXSDKInstance")]),e._v("上注册"),a("code",[e._v("registerOnWXScrollListener")]),e._v(" ，详细参数见"),a("code",[e._v("OnWXScrollListener")])]),e._v(" "),a("h2",{attrs:{id:"其它的一些接口介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#其它的一些接口介绍","aria-hidden":"true"}},[e._v("#")]),e._v(" 其它的一些接口介绍")]),e._v(" "),a("h3",{attrs:{id:"设置instance显示的大小"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设置instance显示的大小","aria-hidden":"true"}},[e._v("#")]),e._v(" 设置instance显示的大小")]),e._v(" "),a("p",[e._v("使用"),a("code",[e._v("mWXSDKInstance.setSize()")]),e._v("来改变instance容器显示的大小")]),e._v(" "),a("h3",{attrs:{id:"降级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#降级","aria-hidden":"true"}},[e._v("#")]),e._v(" 降级")]),e._v(" "),a("p",[e._v("Weex在开发过程中，会不断增加新的feature，但是这些feature可能在老版本上不兼容。这种情况下，native可以在"),a("code",[e._v("IWXRenderListener")]),e._v("的"),a("code",[e._v("onException")]),e._v('中进行判断，如果错误信息是 "|"格式. 并且分割后，"|"前第一个字符串等于1，这时候native可以直接降级到h5页面或者提示用户当前版本不支持。')])])},[],!1,null,null,null);t.default=i.exports}}]);